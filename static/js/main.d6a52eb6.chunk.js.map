{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/App/App.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","services/article-api.js","services/mapper.js","components/App/App.jsx","index.jsx","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","valueSearchBarr","handleInput","event","value","target","setState","handleSubmit","preventDefault","props","onSubmit","resetSearchBarr","this","className","styles","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","placeholder","onChange","Component","ImageGalleryItem","src","largeImage","alt","ImageGalleryItemImage","data-large_image","ImageGallery","imageGalleryRef","createRef","prevProps","prevState","articles","current","shouldScroll","scrollHeight","scrollTop","offsetHeight","snapshot","openModal","ref","onClick","role","map","id","webformatURL","largeImageURL","key","Button","onClickButton","Modal","overletRef","handleKeyPress","code","onClose","handleBackdropClick","window","addEventListener","removeEventListener","srcModalImage","Overlay","onKeyDown","articleAPI","searchQuery","searchPage","axios","get","mapper","App","searchValue","isLoading","error","isModalOpen","modalImage","addSearchValue","toLowerCase","handleAddMore","fatchArticles","then","data","hits","catch","finally","nodeName","dataset","large_image","closeModal","toast","message","length","color","height","Loader","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d6a52eb6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1vExX\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3JEbZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__3gh8s\",\"Modal\":\"Modal_Modal__2YSDl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__1bvgS\",\"Loader\":\"App_Loader__-VXm0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3oVX5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2ReCq\"};","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  static propTypes = { onSubmit: PropTypes.func.isRequired };\n\n  state = {\n    valueSearchBarr: '',\n  };\n\n  handleInput = event => {\n    const { value } = event.target;\n    this.setState({ valueSearchBarr: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.props.onSubmit(this.state.valueSearchBarr);\n    this.resetSearchBarr();\n  };\n\n  resetSearchBarr = () => {\n    this.setState({ valueSearchBarr: '' });\n  };\n\n  render() {\n    const { valueSearchBarr } = this.state;\n\n    return (\n      <header className={styles.Searchbar}>\n        <form className={styles.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={styles.SearchFormButton}>\n            <span className={styles.SearchFormButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={styles.SearchFormInput}\n            type=\"text\"\n            autoComplete=\"off\"\n            placeholder=\"Search images and photos\"\n            value={valueSearchBarr}\n            onChange={this.handleInput}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ src, largeImage }) => (\n  <li className={styles.ImageGalleryItem}>\n    <img\n      src={src}\n      alt=\"\"\n      className={styles.ImageGalleryItemImage}\n      data-large_image={largeImage}\n    />\n  </li>\n);\n\nImageGalleryItem.propTypes = {\n  src: PropTypes.string.isRequired,\n  largeImage: PropTypes.string.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React, { Component, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport styles from './ImageGallery.module.css';\n\nclass ImageGallery extends Component {\n  static propTypes = {\n    articles: PropTypes.arrayOf(\n      PropTypes.shape({\n        id: PropTypes.number.isRequired,\n        webformatURL: PropTypes.string.isRequired,\n        largeImageURL: PropTypes.string.isRequired,\n      }),\n    ).isRequired,\n    openModal: PropTypes.func.isRequired,\n  };\n\n  imageGalleryRef = createRef();\n\n  getSnapshotBeforeUpdate(prevProps, prevState) {\n    const { articles } = this.props;\n\n    if (prevProps.articles !== articles) {\n      const {\n        scrollHeight,\n        scrollTop,\n        offsetHeight,\n      } = this.imageGalleryRef.current;\n      const distanceFromBottom = scrollHeight - (scrollTop + offsetHeight);\n      return { shouldScroll: distanceFromBottom < 10 };\n    }\n\n    return null;\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (snapshot && snapshot.shouldScroll) {\n      const imageGalleryRef = this.imageGalleryRef.current;\n      imageGalleryRef.scrollTop = imageGalleryRef.scrollHeight;\n    }\n  }\n\n  render() {\n    const { openModal, articles } = this.props;\n    return (\n      <ul\n        ref={this.imageGalleryRef}\n        className={styles.ImageGallery}\n        onClick={openModal}\n        role=\"presentation\"\n      >\n        {articles.map(({ id, webformatURL, largeImageURL }) => {\n          return (\n            <ImageGalleryItem\n              src={webformatURL}\n              key={id}\n              largeImage={largeImageURL}\n              openModal={openModal}\n            />\n          );\n        })}\n      </ul>\n    );\n  }\n}\n\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Button.module.css';\n\nconst Button = ({ onClickButton }) => (\n  <button type=\"button\" className={styles.Button} onClick={onClickButton}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClickButton: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React, { Component, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Modal.module.css';\n\nclass Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    srcModalImage: PropTypes.string.isRequired,\n  };\n\n  overletRef = createRef();\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = event => {\n    if (event.code !== 'Escape') return;\n\n    this.props.onClose();\n  };\n\n  handleBackdropClick = event => {\n    const { current } = this.overletRef;\n\n    if (current && event.target !== current) return;\n\n    this.props.onClose();\n  };\n\n  render() {\n    const { srcModalImage } = this.props;\n    return (\n      <div\n        className={styles.Overlay}\n        ref={this.overletRef}\n        onClick={this.handleBackdropClick}\n        onKeyDown={this.handleKeyPress}\n        role=\"presentation\"\n      >\n        <img src={srcModalImage} className={styles.Modal} alt=\"\" />\n      </div>\n    );\n  }\n}\n\nexport default Modal;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst USER_KEY = '13080993-ef0fc8e255e06bc4fd233c1c4';\n\nconst articleAPI = (searchQuery, searchPage) =>\n  axios.get(\n    `${BASE_URL}?q=${searchQuery}&page=${searchPage}&key=${USER_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  );\n\nexport default articleAPI;\n","const mapper = articles =>\n  articles.map(({ id, webformatURL, largeImageURL }) => {\n    return { id, webformatURL, largeImageURL };\n  });\n\nexport default mapper;\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport { ToastContainer, toast } from 'react-toastify';\nimport Searchbar from '../Searchbar/Searchbar';\nimport ImageGallery from '../ImageGallery/ImageGallery';\nimport Button from '../Button/Button';\nimport Modal from '../Modal/Modal';\nimport articleAPI from '../../services/article-api';\nimport mapper from '../../services/mapper';\nimport styles from './App.module.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass App extends Component {\n  state = {\n    searchValue: '',\n    searchPage: 1,\n    articles: [],\n    isLoading: false,\n    error: null,\n    isModalOpen: false,\n    modalImage: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { searchValue, searchPage, error } = this.state;\n    if (\n      prevState.searchValue !== searchValue ||\n      prevState.searchPage !== searchPage\n    ) {\n      this.fatchArticles(searchValue, searchPage);\n    }\n\n    if (prevState.error !== error) {\n      toast.error(`Whoops, something went wrong: ${error.message}`);\n    }\n  }\n\n  addSearchValue = value => {\n    this.setState({\n      searchValue: value.toLowerCase(),\n      searchPage: 1,\n      articles: [],\n    });\n  };\n\n  handleAddMore = () => {\n    this.setState(prevState => ({ searchPage: prevState.searchPage + 1 }));\n  };\n\n  fatchArticles = (searchValue, searchPage) => {\n    this.setState({ isLoading: true });\n\n    articleAPI(searchValue, searchPage)\n      .then(({ data }) =>\n        this.setState(prevState => ({\n          articles: [...prevState.articles, ...mapper(data.hits)],\n        })),\n      )\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  openModal = event => {\n    const { target } = event;\n    if (target.nodeName !== 'IMG') return;\n    this.setState({\n      isModalOpen: true,\n      modalImage: target.dataset.large_image,\n    });\n  };\n\n  closeModal = () => {\n    this.setState({ isModalOpen: false, modalImage: null });\n  };\n\n  render() {\n    const { articles, isLoading, isModalOpen, modalImage, error } = this.state;\n\n    return (\n      <div className={styles.App}>\n        <Searchbar onSubmit={this.addSearchValue} />\n        {articles.length > 0 && (\n          <ImageGallery articles={articles} openModal={this.openModal} />\n        )}\n        {isLoading ? (\n          <Loader\n            type=\"ThreeDots\"\n            color=\"Red\"\n            height={20}\n            className={styles.Loader}\n          />\n        ) : (\n          articles.length > 0 && <Button onClickButton={this.handleAddMore} />\n        )}\n        <ToastContainer />\n        {error && <p>Whoops, something went wrong: {error.message}</p>}\n        {isModalOpen && (\n          <Modal srcModalImage={modalImage} onClose={this.closeModal} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__lut6W\",\"SearchForm\":\"Searchbar_SearchForm__1B87C\",\"SearchFormButton\":\"Searchbar_SearchFormButton__1nD7J\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__18POz\",\"SearchFormInput\":\"Searchbar_SearchFormInput__3aLsG\"};"],"sourceRoot":""}